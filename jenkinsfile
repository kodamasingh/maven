pipeline
{
    agent any
    stages
    {
        stage('continuousDownload')
        {
           steps
           {
              git 'https://github.com/kodamasingh/maven.git'    
           }       
        }
        stage('continuousBuild')
        {
           steps
           {
             sh 'mvn package'
           }
        }
        stage('continuousDeployment')
        {
           steps
           {
              deploy adapters: [tomcat9(credentialsId: '06b551a3-2d1e-4e13-832b-b1d6aaca16bd', path: '', url: 'http://172.31.10.109:8080')], contextPath: 'test1', war: '**/*.war'
           }
        }   
        stage('continuousTesting')
        {
           steps
           {
              git 'https://github.com/intelliqittrainings/FunctionalTesting.git'
              sh '''java -jar /var/lib/jenkins/workspace/declarativepipeline1/testing.jar'''
           }
        }
         stage('continuousDelivery')
        {
           steps
           {
               deploy adapters: [tomcat9(credentialsId: '06b551a3-2d1e-4e13-832b-b1d6aaca16bd', path: '', url: 'http://172.31.2.98:8080')], contextPath: 'prod1', war: '**/*.war'
           }
           
        }   
    }
}    
